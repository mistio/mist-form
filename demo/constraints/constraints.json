{
  "type": "object",
  "id": "constraints-form",
  "$schema": "http://json-schema.org/draft-03/schema#",
  "label": "Constraints",
  "description": "You can add constraints.",
  "submitButtonLabel": "Add",
  "canClose": false,
  "additionalProperties": false,
  "properties": {
    "costToggle": {
      "label": "Select cost constraint",
      "id": "cost_toggle",
      "type": "boolean",
      "noLabelFloat": true,
      "exclude": true
    },
    "costConstraintContainer": {
      "name": "cost",
      "label": "Cost constraints",
      "id": "cost_constraint_container",
      "type": "subform_container",
      "value": "costConstraints",
      "hidden": true
    },
    "sizeToggle": {
      "label": "Select size constraint",
      "id": "size_toggle",
      "type": "boolean",
      "noLabelFloat": true,
      "exclude": true
    },
    "sizeConstraintContainer": {
      "name": "size",
      "label": "Size constraints",
      "id": "size_constraint_container",
      "type": "subform_container",
      "value": "sizeConstraints",
      "hidden": true
    },
    "expirationToggle": {
      "label": "Select expiration constraint",
      "id": "expiration_toggle",
      "type": "boolean",
      "noLabelFloat": true,
      "exclude": true
    },
    "fieldToggle": {
      "label": "Select field constraint",
      "id": "field_toggle",
      "type": "boolean",
      "noLabelFloat": true,
      "exclude": true
    },
    "fieldConstraintContainer": {
      "name": "field",
      "label": "Field constraints",
      "id": "field_constraint_container",
      "type": "subform_container",
      "value": "fieldConstraints",
      "hidden": true
    },
    "costConstraints": {
      "id": "cost_constraints",
      "type": "subform",
      "properties": {
        "max_team_run_rate": {
          "label": "Max run rate for your team",
          "id": "cost_max_team_run_rate",
          "type": "string",
          "format": "number",
          "required": true,
          "value": 1,
          "minimum": 1,
          "autoValidate": true,
          "helpText": "A minimum of 1 $ is required.",
          "suffix": "$"
        },
        "max_total_run_rate": {
          "label": "Max run rate for your entire organization",
          "id": "cost_max_total_run_rate",
          "type": "string",
          "format": "number",
          "required": true,
          "value": 1,
          "minimum": 1,
          "autoValidate": true,
          "helpText": "A minimum of 1 $ is required.",
          "suffix": "$"
        }
      }
    },
    "fieldConstraints": {
      "id": "field_constraints",
      "type": "subform",
      "properties": {}
    },
    "sizeConstraints": {
      "id": "size_constraints",
      "type": "subform",
      "properties": {
        "allowed": {
          "label": "Allowed",
          "id": "allowed",
          "type": "string",
          "required": false,
          "format": "textarea",
          "helpText": "Please enter comma separated names, ids or external ids",
          "error-message": "Please enter comma separated names, ids or external ids"
        },
        "not_allowed": {
          "label": "Not allowed",
          "id": "not_allowed",
          "type": "string",
          "required": false,
          "format": "textarea",
          "helpText": "Please enter comma separated names, ids or external ids",
          "error-message": "Please enter comma separated names, ids or external ids"
        },
        "cpu": {
          "name": "cpu",
          "label": "Cpu constraints",
          "id": "cpu_constraint",
          "type": "subform_container",
          "value": "sizeSubform"
        },
        "ram": {
          "name": "ram",
          "label": "Ram constraints",
          "id": "ram_constraint",
          "type": "subform_container",
          "value": "sizeSubform"
        },
        "primary_disk": {
          "name": "disk",
          "label": "Primary disk constraints",
          "id": "primary_disk_constraint",
          "type": "subform_container",
          "value": "sizeSubform"
        },
        "swap_disk": {
          "name": "swap_disk",
          "label": "Swap disk constraints",
          "id": "swap_disk_constraint",
          "type": "subform_container",
          "value": "sizeSubform"
        }
      }
    },
    "sizeSubform": {
      "id": "size_subform",
      "type": "subform",
      "properties": {
        "min": {
          "label": "Min size",
          "id": "min",
          "type": "string",
          "format": "number",
          "required": true,
          "value": 1,
          "minimum": 1,
          "autoValidate": true,
          "helpText": "A minimum of 1 is required"
        },
        "max": {
          "label": "Max size",
          "id": "max",
          "type": "string",
          "format": "number",
          "required": true,
          "value": 1,
          "minimum": 1,
          "autoValidate": true,
          "helpText": "A minimum of 1 is required."
        },
        "showToggle": {
          "label": "Show/Hide field",
          "id": "show_toggle",
          "type": "boolean",
          "noLabelFloat": true
        }
      }
    }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "costToggle": "reverseToggle"
        }
      },
      "then": {
        "properties": {
          "costConstraintContainer": {
            "property": "hidden"
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "sizeToggle": "reverseToggle"
        }
      },
      "then": {
        "properties": {
          "sizeConstraintContainer": {
            "property": "hidden"
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "fieldToggle": "reverseToggle"
        }
      },
      "then": {
        "properties": {
          "fieldConstraintContainer": {
            "property": "hidden"
          }
        }
      }
    }
  ]
}